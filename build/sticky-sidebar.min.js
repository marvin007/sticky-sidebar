!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.StickySidebar=e():t.StickySidebar=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";var n,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(n=function(){if("undefined"==typeof window)return null;var t="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(e){t.clearTimeout(e)};function n(t,e){var i=Object.prototype.toString.call(t),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,o=0,r=t.length;if(n)for(;o<r;o++)e(t[o]);else e(t)}function o(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}function r(t,e){Object.keys(e).forEach((function(i){t.style[i]=e[i]}))}var s=function(t,a){var c=0;function l(){var t,e,i=[];this.add=function(t){i.push(t)},this.call=function(n){for(t=0,e=i.length;t<e;t++)i[t].call(this,n)},this.remove=function(n){var o=[];for(t=0,e=i.length;t<e;t++)i[t]!==n&&o.push(i[t]);i=o},this.length=function(){return i.length}}function u(t,i){if(t)if(t.resizedAttached)t.resizedAttached.add(i);else{t.resizedAttached=new l,t.resizedAttached.add(i),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var n={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};r(t.resizeSensor,n);var a=document.createElement("div");a.className="resize-sensor-expand",r(a,n);var u=document.createElement("div");r(u,s),a.appendChild(u);var d=document.createElement("div");d.className="resize-sensor-shrink",r(d,n);var h=document.createElement("div");r(h,s),r(h,{width:"200%",height:"200%"}),d.appendChild(h),t.resizeSensor.appendChild(a),t.resizeSensor.appendChild(d),t.appendChild(t.resizeSensor);var f=window.getComputedStyle(t),y=f?f.getPropertyValue("position"):null;"absolute"!==y&&"relative"!==y&&"fixed"!==y&&"sticky"!==y&&(t.style.position="relative");var p=!1,m=0,v=o(t),b=0,g=0,k=!0;c=0;var S=function(){if(k){if(0===t.offsetWidth&&0===t.offsetHeight)return void(c||(c=e((function(){c=0,S()}))));k=!1}var i,n;i=t.offsetWidth,n=t.offsetHeight,u.style.width=i+10+"px",u.style.height=n+10+"px",a.scrollLeft=i+10,a.scrollTop=n+10,d.scrollLeft=i+10,d.scrollTop=n+10};t.resizeSensor.resetSensor=S;var w=function(){m=0,p&&(b=v.width,g=v.height,t.resizedAttached&&t.resizedAttached.call(v))},P=function(){v=o(t),(p=v.width!==b||v.height!==g)&&!m&&(m=e(w)),S()},z=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};z(a,"scroll",P),z(d,"scroll",P),c=e((function(){c=0,S()}))}}n(t,(function(t){u(t,a)})),this.detach=function(e){c||(i(c),c=0),s.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor()}};if(s.reset=function(t){n(t,(function(t){t.resizeSensor.resetSensor()}))},s.detach=function(t,e){n(t,(function(t){t&&(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))}))},"undefined"!=typeof MutationObserver){var a=new MutationObserver((function(t){for(var e in t)if(t.hasOwnProperty(e))for(var i=t[e].addedNodes,n=0;n<i.length;n++)i[n].resizeSensor&&s.reset(i[n])}));document.addEventListener("DOMContentLoaded",(function(t){a.observe(document.body,{childList:!0,subtree:!0})}))}return s})?n.call(e,i,e,t):n)||(t.exports=o)},function(t,e,i){"use strict";i.r(e);var n=i(0),o=i.n(n);i(2);function r(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(this,t),h(this,"options",{}),h(this,"classPrefix","ss"),h(this,"target",null),h(this,"targetParent",null),h(this,"container",null),h(this,"sidebar",null),h(this,"currentScroll",window.pageYOffset),h(this,"scrollDirection",""),h(this,"stickyPosition",""),h(this,"eventHandlers",new Map),h(this,"resizeSensorHandlers",new Map),this.options=c(c({},this.options),i),"string"==typeof e){if(this.target=document.querySelector(e),!this.target)throw new Error("sidebar element not found")}else{if(!(e instanceof HTMLElement))throw new Error("wrong sidebar element type");this.target=e}this.initialize()}return d(t,[{key:"containerClass",get:function(){return"".concat(this.classPrefix,"-container")}},{key:"sidebarClass",get:function(){return"".concat(this.classPrefix,"-sidebar")}},{key:"stickyTopClass",get:function(){return"".concat(this.classPrefix,"-sticky-top")}},{key:"stickyBottomClass",get:function(){return"".concat(this.classPrefix,"-sticky-bottom")}}]),d(t,[{key:"initialize",value:function(){this.createLayout(),this.bindMethods(),this.debounceMethods(),this.setResizeSensorHandlers(),this.setEventHandlers(),this.initResizeSensorActions("add"),this.initEventActions("add"),this.update()}},{key:"destroy",value:function(){this.initEventActions("remove"),this.initResizeSensorActions("remove"),this.removeStickyPosition(),this.destroyLayout()}},{key:"createLayout",value:function(){this.targetParent=this.target.parentElement,this.sidebar=document.createElement("div"),this.sidebar.className=this.sidebarClass,this.container=document.createElement("div"),this.container.className=this.containerClass,this.sidebar.append(this.target),this.container.append(this.sidebar),this.targetParent.append(this.container)}},{key:"destroyLayout",value:function(){this.container.parentElement.append(this.target),this.container.remove()}},{key:"bindMethods",value:function(){var t=this;["windowScrollHandler","update","sidebarResizeHandler","containerResizeHandler"].forEach((function(e){t[e]=t[e].bind(t)}))}},{key:"debounceMethods",value:function(){var e=this;["windowScrollHandler","update"].forEach((function(i){e[i]=t.debounce(e[i])}))}},{key:"setEventHandlers",value:function(){var t=this;[[window,{scroll:{handler:this.windowScrollHandler},resize:{handler:this.update}}]].forEach((function(e){t.eventHandlers.set(e[0],e[1])}))}},{key:"setResizeSensorHandlers",value:function(){var t=this;[[this.sidebar,this.sidebarResizeHandler],[this.container,this.containerResizeHandler]].forEach((function(e){t.resizeSensorHandlers.set(e[0],e[1])}))}},{key:"initEventActions",value:function(e){this.eventHandlers.forEach((function(i,n){(n=t.htmlElementsToArray(n)).forEach((function(t){Object.keys(i).forEach((function(n){var o=i[n].handler;if("add"===e){var s=i[n].paramsOnAdd||[];t.addEventListener.apply(t,[n,o].concat(r(s)))}else if("remove"===e){var a=i[n].paramsOnRemove||[];t.removeEventListener.apply(t,[n,o].concat(r(a)))}}))}))}))}},{key:"initResizeSensorActions",value:function(e){this.resizeSensorHandlers.forEach((function(i,n){(n=t.htmlElementsToArray(n)).forEach((function(t){"add"===e?new o.a(t,i):"remove"===e&&o.a.detach(t,i)}))}))}},{key:"windowScrollHandler",value:function(){this.setScrollDirection(),this.checkStickyPossibility()&&this.checkStickyScrolling()&&(this.checkTopInContainer()?(this.container.style.paddingBottom="","down"===this.scrollDirection&&this.setBottomStickyPosition()):this.checkBottomInContainer()?(this.container.style.paddingTop="","up"===this.scrollDirection&&this.setTopStickyPosition()):"up"===this.scrollDirection?"bottom"===this.stickyPosition&&(this.container.style.paddingBottom="".concat(this.container.clientHeight-(this.sidebar.offsetTop+this.sidebar.offsetHeight),"px"),this.container.style.paddingTop="",this.setTopStickyPosition()):"top"===this.stickyPosition&&(this.container.style.paddingTop="".concat(this.sidebar.offsetTop,"px"),this.container.style.paddingBottom="",this.setBottomStickyPosition()))}},{key:"sidebarResizeHandler",value:function(){this.update()}},{key:"containerResizeHandler",value:function(){this.update()}},{key:"stickyPositionCorrection",value:function(){var t=this.getTopStickyPosition(),e=this.getBottomStickyPosition(),i=this.sidebar.getBoundingClientRect().top-t>0,n=document.documentElement.clientHeight-e-this.sidebar.getBoundingClientRect().bottom>0;i?(this.removeContainerPaddings(),this.setTopStickyPosition()):n&&(this.removeContainerPaddings(),this.setBottomStickyPosition())}},{key:"update",value:function(){this.checkStickyPossibility()?this.checkStickyScrolling()?this.checkTopInContainer()?this.setBottomStickyPosition():this.checkBottomInContainer()?this.setTopStickyPosition():this.stickyPositionCorrection():(this.removeContainerPaddings(),this.setTopStickyPosition()):this.removeStickyPosition()}},{key:"checkTopInContainer",value:function(){return 0===this.sidebar.offsetTop}},{key:"checkBottomInContainer",value:function(){return this.sidebar.offsetTop+this.sidebar.offsetHeight===this.container.clientHeight}},{key:"checkStickyPossibility",value:function(){return this.container.clientHeight>this.sidebar.offsetHeight}},{key:"checkStickyScrolling",value:function(){var t=this.getTopStickyPosition(),e=this.getBottomStickyPosition(),i=document.documentElement.clientHeight-t-e;return this.sidebar.offsetHeight>i}},{key:"setTopStickyPosition",value:function(){this.container.classList.remove(this.stickyBottomClass),this.container.classList.add(this.stickyTopClass),this.stickyPosition="top"}},{key:"setBottomStickyPosition",value:function(){this.container.classList.remove(this.stickyTopClass),this.container.classList.add(this.stickyBottomClass),this.stickyPosition="bottom"}},{key:"removeStickyPosition",value:function(){this.removeContainerPaddings(),this.container.classList.remove(this.stickyTopClass,this.stickyBottomClass),this.stickyPosition=""}},{key:"removeContainerPaddings",value:function(){this.container.style.paddingTop="",this.container.style.paddingBottom=""}},{key:"setScrollDirection",value:function(){window.pageYOffset>this.currentScroll&&(this.scrollDirection="down"),window.pageYOffset<this.currentScroll&&(this.scrollDirection="up"),this.currentScroll=window.pageYOffset}},{key:"getTopStickyPosition",value:function(){return t.getStyleNumberValue(this.sidebar,"--top-position")}},{key:"getBottomStickyPosition",value:function(){return t.getStyleNumberValue(this.sidebar,"--bottom-position")}}],[{key:"getStyleNumberValue",value:function(t,e){return parseFloat(window.getComputedStyle(t).getPropertyValue(e))||0}},{key:"htmlElementsToArray",value:function(e){return"NodeList"===t.type(e)?r(e):[e]}},{key:"type",value:function(t){return Object.prototype.toString.call(t).match(/^\[object (\S+?)]$/)[1]||"undefined"}},{key:"debounce",value:function(t){var e;return function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var r=this;e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame((function(){t.apply(r,n)}))}}}]),t}();e.default=f},function(t,e,i){}]).default}));